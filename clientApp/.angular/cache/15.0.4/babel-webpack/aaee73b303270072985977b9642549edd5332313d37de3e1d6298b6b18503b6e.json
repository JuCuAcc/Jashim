{"ast":null,"code":"import { environment } from '../../../../environments/environment';\nimport { ConfirmationDialogComponent } from '../../confirmation-dialog/confirmation-dialog.component';\nimport { MatSort } from '@angular/material/sort';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../../services/people.service\";\nimport * as i3 from \"../../../services/country.service\";\nimport * as i4 from \"../../../services/city.service\";\nimport * as i5 from \"@angular/material/dialog\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/router\";\nconst _c0 = function (a2) {\n  return [\"/people\", \"edit\", a2];\n};\nfunction PeopleListComponent_table_5_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" tr \");\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \" Id \");\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\")(14, \"a\", 9);\n    i0.ɵɵtext(15);\n    i0.ɵɵelement(16, \"span\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"td\")(21, \"a\", 11);\n    i0.ɵɵelement(22, \"span\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"a\", 13);\n    i0.ɵɵelement(24, \"span\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"a\", 15);\n    i0.ɵɵlistener(\"click\", function PeopleListComponent_table_5_tr_21_Template_a_click_25_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const person_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.openDeleteConfirmationDialog(person_r4));\n    });\n    i0.ɵɵelement(26, \"span\", 16);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const person_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", person_r4.id, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", person_r4.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.getCountryName(person_r4.countryId), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.getCityName(person_r4.cityId), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", person_r4.languageSkills, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r3.getResumeFile(person_r4.resumeFileName), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", person_r4.resumeFileName, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(19, 10, person_r4.dateOfBirth, \"dd MMM yyyy\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(13, _c0, person_r4.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(15, _c0, person_r4.id));\n  }\n}\nfunction PeopleListComponent_table_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 5, 6)(2, \"thead\")(3, \"tr\")(4, \"th\", 7);\n    i0.ɵɵtext(5, \"#\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Country\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"City\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Language Skills\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Resume\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Date Of Birth\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\", 7);\n    i0.ɵɵtext(19, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"tbody\");\n    i0.ɵɵtemplate(21, PeopleListComponent_table_5_tr_21_Template, 27, 17, \"tr\", 8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.people);\n  }\n}\nfunction PeopleListComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"No Person Found\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class PeopleListComponent {\n  constructor(http, peopleService, countryService, cityService, dialog) {\n    this.http = http;\n    this.peopleService = peopleService;\n    this.countryService = countryService;\n    this.cityService = cityService;\n    this.dialog = dialog;\n    this.id = 0;\n    this.countries = [];\n    this.cities = [];\n    this.resumeFileName = \"\";\n    this.people = [];\n    this.baseApiUrl = environment.baseApiUrl;\n    this.resumeDownloadUrl = environment.resumeBaseUrl;\n  }\n  openDeleteConfirmationDialog(person) {\n    const dialogRef = this.dialog.open(ConfirmationDialogComponent, {\n      width: '350px',\n      data: {\n        name: person.name,\n        country: person.countryId,\n        city: person.cityId\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.deleteById(person.id);\n      }\n    });\n  }\n  deleteById(id) {\n    this.peopleService.deletePerson(id).subscribe(() => {\n      this.peopleService.getAllPeople().subscribe(people => {\n        this.people = people;\n      });\n    });\n  }\n  ngOnInit() {\n    this.peopleService.getAllPeople().subscribe({\n      next: people => {\n        this.people = people;\n      },\n      error: response => {\n        console.log(response);\n      }\n    });\n    this.dataSource.sort = this.sort;\n    this.countryService.getCountries().subscribe({\n      next: countries => {\n        this.countries = countries;\n        console.log(countries);\n      },\n      error: response => {\n        console.log(response);\n      }\n    });\n    this.cityService.getCities().subscribe({\n      next: cities => {\n        this.cities = cities;\n        console.log(cities);\n      },\n      error: response => {\n        console.log(response);\n      }\n    });\n  }\n  getCountryName(countryId) {\n    const country = this.countries.find(c => c.id === countryId);\n    return country ? country.name : '';\n  }\n  getCityName(cityId) {\n    const city = this.cities.find(c => c.id === cityId);\n    return city ? city.name : '';\n  }\n  getResumeFile(resumeFileName) {\n    return this.resumeDownloadUrl + '?fileName=' + resumeFileName;\n  }\n}\nPeopleListComponent.ɵfac = function PeopleListComponent_Factory(t) {\n  return new (t || PeopleListComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.PeopleService), i0.ɵɵdirectiveInject(i3.CountryService), i0.ɵɵdirectiveInject(i4.CityService), i0.ɵɵdirectiveInject(i5.MatDialog));\n};\nPeopleListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PeopleListComponent,\n  selectors: [[\"app-people-list\"]],\n  viewQuery: function PeopleListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatSort, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n    }\n  },\n  decls: 7,\n  vars: 2,\n  consts: [[\"rel\", \"stylesheet\", \"href\", \"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css\"], [1, \"container\", \"my-5\"], [1, \"mb-3\"], [\"mat-table\", \"\", \"matSort\", \"\", \"class\", \"table\", 4, \"ngIf\"], [4, \"ngIf\"], [\"mat-table\", \"\", \"matSort\", \"\", 1, \"table\"], [\"sort\", \"matSort\"], [1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [3, \"href\"], [1, \"glyphicon\", \"glyphicon-download-alt\"], [1, \"download-icon-view\", 3, \"routerLink\"], [1, \"glyphicon\", \"glyphicon-eye-open\"], [1, \"download-icon-edit\", 3, \"routerLink\"], [1, \"glyphicon\", \"glyphicon-pencil\"], [1, \"download-icon-remove\", 3, \"click\"], [1, \"glyphicon\", \"glyphicon-remove\"]],\n  template: function PeopleListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵelement(1, \"link\", 0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 1)(3, \"h1\", 2);\n      i0.ɵɵtext(4, \"Personal Information\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, PeopleListComponent_table_5_Template, 22, 1, \"table\", 3);\n      i0.ɵɵtemplate(6, PeopleListComponent_p_6_Template, 2, 0, \"p\", 4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.people && ctx.people.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.people || ctx.people.length <= 0);\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i7.RouterLink, i6.DatePipe],\n  styles: [\"a[_ngcontent-%COMP%] {\\r\\n  text-decoration: none;\\r\\n}\\r\\n\\r\\n.download-icon-remove[_ngcontent-%COMP%] {\\r\\n  display: inline-block;\\r\\n  width: 15px;\\r\\n  height: 19px;\\r\\n  background-color:red;\\r\\n  color: white;\\r\\n  margin-left: 3px;\\r\\n  right: 3px;\\r\\n  border-radius: 3px;\\r\\n}\\r\\n\\r\\n.download-icon-edit[_ngcontent-%COMP%] {\\r\\n  display: inline-block;\\r\\n  width: 15px;\\r\\n  height: 19px;\\r\\n  background-color: forestgreen;\\r\\n  color: white;\\r\\n  margin-left: 3px;\\r\\n  right: 3px;\\r\\n  border-radius: 3px;\\r\\n}\\r\\n\\r\\n.download-icon-view[_ngcontent-%COMP%] {\\r\\n  display: inline-block;\\r\\n  width: 15px;\\r\\n  height: 19px;\\r\\n  background-color: deepskyblue;\\r\\n  color: white;\\r\\n  margin-left: 3px;\\r\\n  right: 3px;\\r\\n  border-radius: 3px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wZW9wbGUvcGVvcGxlLWxpc3QvcGVvcGxlLWxpc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixXQUFXO0VBQ1gsWUFBWTtFQUNaLG9CQUFvQjtFQUNwQixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLFVBQVU7RUFDVixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsV0FBVztFQUNYLFlBQVk7RUFDWiw2QkFBNkI7RUFDN0IsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixVQUFVO0VBQ1Ysa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLFdBQVc7RUFDWCxZQUFZO0VBQ1osNkJBQTZCO0VBQzdCLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsVUFBVTtFQUNWLGtCQUFrQjtBQUNwQiIsInNvdXJjZXNDb250ZW50IjpbImEge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxufVxyXG5cclxuLmRvd25sb2FkLWljb24tcmVtb3ZlIHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgd2lkdGg6IDE1cHg7XHJcbiAgaGVpZ2h0OiAxOXB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6cmVkO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBtYXJnaW4tbGVmdDogM3B4O1xyXG4gIHJpZ2h0OiAzcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG59XHJcblxyXG4uZG93bmxvYWQtaWNvbi1lZGl0IHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgd2lkdGg6IDE1cHg7XHJcbiAgaGVpZ2h0OiAxOXB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IGZvcmVzdGdyZWVuO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBtYXJnaW4tbGVmdDogM3B4O1xyXG4gIHJpZ2h0OiAzcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG59XHJcblxyXG4uZG93bmxvYWQtaWNvbi12aWV3IHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgd2lkdGg6IDE1cHg7XHJcbiAgaGVpZ2h0OiAxOXB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IGRlZXBza3libHVlO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBtYXJnaW4tbGVmdDogM3B4O1xyXG4gIHJpZ2h0OiAzcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["environment","ConfirmationDialogComponent","MatSort","i0","PeopleListComponent","constructor","http","peopleService","countryService","cityService","dialog","baseApiUrl","resumeBaseUrl","openDeleteConfirmationDialog","person","dialogRef","open","width","data","name","country","countryId","city","cityId","afterClosed","subscribe","result","deleteById","id","deletePerson","getAllPeople","people","ngOnInit","next","error","response","console","log","dataSource","sort","getCountries","countries","getCities","cities","getCountryName","find","c","getCityName","getResumeFile","resumeFileName","resumeDownloadUrl","selectors","viewQuery"],"sourceRoot":"","sources":["D:\\Jashim\\Job\\AngularFullStack\\EIS\\FullStack UI\\FullStack.UI\\src\\app\\components\\people\\people-list\\people-list.component.ts","D:\\Jashim\\Job\\AngularFullStack\\EIS\\FullStack UI\\FullStack.UI\\src\\app\\components\\people\\people-list\\people-list.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { count, Observable } from 'rxjs';\r\nimport { Person } from 'src/app/models/person.model';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { City } from '../../../models/city.model';\r\nimport { Country } from '../../../models/country.model';\r\nimport { CityService } from '../../../services/city.service';\r\nimport { CountryService } from '../../../services/country.service';\r\nimport { PeopleService } from '../../../services/people.service';\r\n\r\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { ConfirmationDialogComponent } from '../../confirmation-dialog/confirmation-dialog.component';\r\n\r\n\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { MatSort } from '@angular/material/sort';\r\n\r\n@Component({\r\n  selector: 'app-people-list',\r\n  templateUrl: './people-list.component.html',\r\n  styleUrls: ['./people-list.component.css']\r\n})\r\nexport class PeopleListComponent{\r\n\r\n  @ViewChild(MatSort)\r\n    sort!: MatSort;\r\n  dataSource: any;\r\n\r\n  id: number = 0;\r\n  countries: Country[] = [];\r\n  cities: City[] = [];\r\n  resumeFileName: string = \"\";\r\n  people: Person[] = [\r\n\r\n  ];\r\n\r\n  baseApiUrl: string = environment.baseApiUrl;\r\n  resumeDownloadUrl: string = environment.resumeBaseUrl;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private peopleService: PeopleService,\r\n    private countryService: CountryService,\r\n    private cityService: CityService,\r\n    private dialog: MatDialog\r\n  ) { }\r\n\r\n\r\n  openDeleteConfirmationDialog(person: Person) {\r\n    const dialogRef = this.dialog.open(ConfirmationDialogComponent, {\r\n      width: '350px',\r\n      data: {\r\n        name: person.name,\r\n        country: person.countryId,\r\n        city: person.cityId\r\n      }\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        this.deleteById(person.id);\r\n      }\r\n    });\r\n  }\r\n\r\n  deleteById(id: number) {\r\n    this.peopleService.deletePerson(id).subscribe(() => {\r\n      this.peopleService.getAllPeople().subscribe(people => {\r\n        this.people = people;\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.peopleService.getAllPeople()\r\n      .subscribe({\r\n        next: (people) => {\r\n          this.people = people;\r\n        },\r\n        error: (response) => {\r\n          console.log(response);\r\n        }\r\n      });\r\n\r\n    this.dataSource.sort = this.sort;\r\n\r\n    this.countryService.getCountries()\r\n      .subscribe({\r\n        next: (countries) => {\r\n          this.countries = countries;\r\n          console.log(countries);\r\n        },\r\n        error: (response) => {\r\n          console.log(response);\r\n        }\r\n      });\r\n\r\n    this.cityService.getCities()\r\n      .subscribe({\r\n        next: (cities) => {\r\n          this.cities = cities;\r\n          console.log(cities);\r\n        },\r\n        error: (response) => {\r\n          console.log(response);\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n  getCountryName(countryId: any) {\r\n    const country = this.countries.find((c: { id: any; }) => c.id === countryId);\r\n    return country ? country.name : '';\r\n  }\r\n\r\n  getCityName(cityId: any) {\r\n    const city = this.cities.find((c: { id: any; }) => c.id === cityId);\r\n    return city ? city.name : '';\r\n  }\r\n  \r\n  getResumeFile(resumeFileName: string) {\r\n    return this.resumeDownloadUrl + '?fileName=' + resumeFileName;\r\n  }\r\n\r\n\r\n  //deleteById(id: number): Observable<Person> {\r\n  //  if (confirm(\"Are you sure you want to delete this person?\")) {\r\n  //    this.peopleService.deletePerson(id);\r\n  //    this.peopleService.getAllPeople().subscribe(data => {\r\n  //      this.people = data;\r\n  //    });\r\n  //    return this.http.delete<Person>(this.baseApiUrl + '/api/people/' + id);\r\n  //  }\r\n  //  return this.http.delete<Person>(this.baseApiUrl + '/api/people/' + id);\r\n  //}\r\n\r\n \r\n\r\n}\r\n","<div>\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css\">\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js\"></script>\n  <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js\"></script>\n</div>\n\n<div class=\"container my-5\">\n  <h1 class=\"mb-3\">Personal Information</h1>\n\n  <!--<table class=\"table\" *ngIf=\"people && people.length > 0\">-->\n  <!--<table mat-table [dataSource]=\"dataSource\" matSort #sort=\"matSort\" class=\"table\"  *ngIf=\"people && people.length > 0\">-->\n  <table mat-table matSort #sort=\"matSort\" class=\"table\"  *ngIf=\"people && people.length > 0\">\n    <thead>\n      <tr>\n        <th class=\"text-center\">#</th>\n        <th>Name</th>\n        <th>Country</th>\n        <th>City</th>\n        <th>Language Skills</th>\n        <th>Resume</th>\n        <th>Date Of Birth</th>\n        <th class=\"text-center\">Actions</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let person of people\">\n        <td> {{person.id}} </td>\n        <td> {{person.name}} </td>\n        <!--<td> {{person.countryId}} </td>\n        <td> {{person.cityId}} </td>-->\n        tr\n        <td> {{getCountryName(person.countryId)}} </td>\n        Id\n        <td> {{getCityName(person.cityId)}} </td>\n        <td> {{person.languageSkills}} </td>\n        <!--<td> {{person.resumeFileName}} </td>-->\n        <td>\n          <a href=\"{{getResumeFile(person.resumeFileName)}}\">\n            {{person.resumeFileName}}\n            <span class=\"glyphicon glyphicon-download-alt\"></span>\n          </a>\n        </td>\n        <td> {{person.dateOfBirth | date: 'dd MMM yyyy'}} </td>\n        <td>\n          <a [routerLink]=\"['/people', 'edit', person.id]\" class=\"download-icon-view\">\n            <span class=\"glyphicon glyphicon-eye-open\"></span>\n          </a>\n          <a [routerLink]=\"['/people', 'edit', person.id]\" class=\"download-icon-edit\">\n            <span class=\"\tglyphicon glyphicon-pencil\"></span>\n          </a>\n          <!--<a class=\"download-icon-remove\" (click)=\"openDialog()\">\n            <span class=\"glyphicon glyphicon-remove\"></span>\n          </a>-->\n          <a class=\"download-icon-remove\" (click)=\"openDeleteConfirmationDialog(person)\">\n            <span class=\"glyphicon glyphicon-remove\"></span>\n          </a>\n\n        </td>\n\n      </tr>\n    </tbody>\n  </table>\n  <p *ngIf=\"!people || people.length <= 0\">No Person Found</p>\n</div>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}